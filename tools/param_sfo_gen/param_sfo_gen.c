/*
 * 
 * It aint pretty but it works -ultros.
 * 
 * Streefighter alpha max SFO
 * 
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//some key info
enum param_sfo_offsets{
	GAME_CAT 			= 0x124,
	GAME_ID  			= 0x128,
	GAME_VERSION  		= 0x140,
	FIRMWARE_VERSION 	= 0x14C,
	PSP_EBOOT_TITLE	 	= 0x158,
}param_sfo_offsets;

static unsigned int size_param_sfo = 472;
static unsigned char param_sfo[] __attribute__((aligned(16))) = {
	0x00, 0x50, 0x53, 0x46, 0x01, 0x01, 0x00, 0x00, 0xb4, 0x00, 0x00, 0x00, 0x20, 0x01, 0x00, 0x00, 
	0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x04, 0x02, 0x03, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 
	0x04, 0x00, 0x00, 0x00, 0x12, 0x00, 0x04, 0x02, 0x0a, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 
	0x08, 0x00, 0x00, 0x00, 0x1a, 0x00, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 
	0x18, 0x00, 0x00, 0x00, 0x26, 0x00, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 
	0x1c, 0x00, 0x00, 0x00, 0x31, 0x00, 0x04, 0x02, 0x05, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 
	0x20, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 
	0x28, 0x00, 0x00, 0x00, 0x4d, 0x00, 0x04, 0x02, 0x05, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 
	0x2c, 0x00, 0x00, 0x00, 0x5c, 0x00, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 
	0x34, 0x00, 0x00, 0x00, 0x63, 0x00, 0x04, 0x02, 0x1a, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 
	0x38, 0x00, 0x00, 0x00, 0x42, 0x4f, 0x4f, 0x54, 0x41, 0x42, 0x4c, 0x45, 0x00, 0x43, 0x41, 0x54, 
	0x45, 0x47, 0x4f, 0x52, 0x59, 0x00, 0x44, 0x49, 0x53, 0x43, 0x5f, 0x49, 0x44, 0x00, 0x44, 0x49, 
	0x53, 0x43, 0x5f, 0x4e, 0x55, 0x4d, 0x42, 0x45, 0x52, 0x00, 0x44, 0x49, 0x53, 0x43, 0x5f, 0x54, 
	0x4f, 0x54, 0x41, 0x4c, 0x00, 0x44, 0x49, 0x53, 0x43, 0x5f, 0x56, 0x45, 0x52, 0x53, 0x49, 0x4f, 
	0x4e, 0x00, 0x50, 0x41, 0x52, 0x45, 0x4e, 0x54, 0x41, 0x4c, 0x5f, 0x4c, 0x45, 0x56, 0x45, 0x4c, 
	0x00, 0x50, 0x53, 0x50, 0x5f, 0x53, 0x59, 0x53, 0x54, 0x45, 0x4d, 0x5f, 0x56, 0x45, 0x52, 0x00, 
	0x52, 0x45, 0x47, 0x49, 0x4f, 0x4e, 0x00, 0x54, 0x49, 0x54, 0x4c, 0x45, 0x00, 0x00, 0x00, 0x00, 
	0x01, 0x00, 0x00, 0x00, 0x55, 0x47, 0x00, 0x00, 0x55, 0x4c, 0x55, 0x53, 0x31, 0x30, 0x30, 0x36, 
	0x32, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 
	0x31, 0x2e, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x32, 0x2e, 0x35, 0x30, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};

int main(int argc, char **argv){
	
	if(argc < 6){
		printf("Usage:\r\n %s <GAME_CAT> <GAME_ID> <GAME_VER> <FIRMWARE_VER> <PSP_EBOOT_TITLE>\r\n\r\n", argv[0]);
		return 0; 
	}
	
	memcpy(&param_sfo[GAME_CAT],		argv[1], strlen(argv[1]));
	memcpy(&param_sfo[GAME_ID],			argv[2], strlen(argv[2]));
	memcpy(&param_sfo[GAME_VERSION],	argv[3], strlen(argv[3]));
	memcpy(&param_sfo[FIRMWARE_VERSION],argv[4], strlen(argv[4]));
	memcpy(&param_sfo[PSP_EBOOT_TITLE],	argv[5], strlen(argv[5]));
	
	FILE *fd = fopen("PARAM.SFO", "w");
	fwrite(param_sfo, sizeof(unsigned char), size_param_sfo, fd);
	fclose(fd);
	return 0;

};

